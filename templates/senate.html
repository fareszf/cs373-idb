{% extends "base.html" %}
{% block head %}
{{ super() }}
{% endblock %}


{% block body %}
<div class="fullscreen-bg-senate">
    <!-- <img src="static/img/senate.jpg"/> -->
</div>
<h1 align="center">Senate</h1>
<div class="container" id = "senate">    
</div>
<script type="text/babel">

var cols = [
    { key: 'firstName', label: 'First Name' },
    { key: 'lastName', label: 'Last Name' },
    { key: 'age', label: 'Age' },
    { key: 'party', label: 'Party' },
    { key: 'state', label: 'State' }
];

var data = [
    { 'id': 1, 'firstName': 'Lamar', 'lastName': 'Alexander', 'age': '75', 'party': 'Republican', 'state': 'Tennessee (Sr.)' },
    { 'id': 2, 'firstName': 'Michael', 'lastName': 'Enzi', 'age': '71', 'party': 'Republican', 'state': 'Wyoming (Sr.)' },
    { 'id': 3, 'firstName': 'Tammy', 'lastName': 'Baldwin', 'age': '53', 'party': 'Democrat', 'state': 'Wisconsin (Sr.)' }
    
]; //Json Data

var Table = React.createClass({
    getInitialState: function(){
        return {data: [ 
]}
    },
    /*loadData: function(){
        $.ajax({
            url: '/daotao/lops',
            success: function(data){
                this.setState({data: data.lops});
            }.bind(this)
        })
    },
    componentWillMount: function(){
        this.loadData();
    },*/ 
    componentDidMount: function(){
        var self = this;
        $('#mytable').dataTable({
          "bAutoWidth": false,
          "bDestroy": true,     
          "fnDrawCallback": function() {                
                self.forceUpdate();         
          }, 
        });
    },
    componentDidUpdate: function(){
        $('#mytable').dataTable({
          "bAutoWidth": false,
          "bDestroy": true, 
        });
    },
    render: function(){
        var x = this.props.data.map(function(d, index){
            return <tr><td><a href={"senator/id/" +d.id}>{d.firstName}</a></td><td><a href={"senator/id/" +d.id}>{d.lastName}</a></td><td>{d.age}</td><td>{d.party}</td><td>{d.state}</td></tr>
        });
        
        return (
            <div className="table-responsive">
                <table className="table table-striped" id="mytable">
                    <thead>
                        <tr className="success">
                            <td>First Name</td>
                            <td>Last Name</td>
                            <td>Age</td>
                            <td>Party</td>
                            <td>State</td>
                        </tr>   
                    </thead>
                    <tbody>
                        {x}
                    </tbody>
                </table>
            </div>
        )       
    }
 });

React.render(<Table cols={cols} data={data}/>, document.getElementById('senate'));

</script>
{% endblock %}
